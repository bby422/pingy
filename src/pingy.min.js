!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b.call(a,c)}):b.call(a,$)}(this,function(a){function k(a){var b=this;return b instanceof k?void b.extend({_:{nodes:[],varNodeMap:{},watchMap:{},_8:{}},el:a}):new k(a)}function l(a,b,c){clearTimeout(a._._8[b]),q[b]=setTimeout(function(){q(a,b,c)},0)}function m(a,b){b=b||a.el.get(0),c(b.childNodes,function(b,c){switch(c.nodeType){case 1:n(a,c);break;case 3:o(a,c)}})}function n(b,f){var g=!0;c(f.attributes,function(i,k){var n,l=k.name,m=d(x(k.value)),o=1;if("y-each"==l)o=70,g=!1,n=v(b,f.innerHTML,m),e=[d(m)];else{if(h.test(l)){var p=m.split(":");return void a(f).on(l.split("y-on").join(""),function(a){b[p[0]](a,p.length>1?p[1]:null)})}"value"==l?(o=71,j.test(m)&&(n=t(b,m))):"y-show"==l?(o=72,n=u(b,m)):"y-html"==l?(o=73,n=u(b,m)):j.test(m)&&(n=t(b,m))}n&&(b._.nodes.push({type:o,node:f,fn:n,attr:l}),c(e,function(a,c){null==b._.varNodeMap[c]?b._.varNodeMap[c]=[b._.nodes.length-1]:b._.varNodeMap[c].push(b._.nodes.length-1)}))}),f.childNodes.length&&g&&m(b,f)}function o(a,b){var d,f=b.textContent;j.test(f)&&(d=t(a,x(f))),d&&(a._.nodes.push({type:3,node:b,fn:d}),c(e,function(b,c){null==a._.varNodeMap[c]?a._.varNodeMap[c]=[a._.nodes.length-1]:a._.varNodeMap[c].push(a._.nodes.length-1)}))}function p(a,b){function d(a){for(var b=0,c=a.length;c>b;b++)a[b]()}for(var c in a._.watchMap)null==b?d(a._.watchMap[c]):b==c?d(a._.watchMap[c]):0==b.indexOf(c+".")?d(a._.watchMap[c]):0==b.indexOf(c+"[")&&d(a._.watchMap[c])}function q(b,e,f){var h,g=b._.nodes;"string"==typeof e&&(g=[],h=e.split(","),c(h,function(a,c){for(var e in b._.varNodeMap){var f=d(c),h=d(e);f==h?r(b,g,b._.varNodeMap[e]):0==h.indexOf(f+".")&&r(b,g,b._.varNodeMap[e])}})),c(g,function(c,d){switch(d.type){case 1:d.node.setAttribute(d.attr,d.fn(b));break;case 3:d.node.textContent=d.fn(b);break;case 70:d.node.innerHTML=d.fn(b),m(b,d.node);break;case 71:a(d.node).val(d.fn(b));break;case 72:d.fn(b)?a(d.node).show():a(d.node).hide();break;case 73:d.node.innerHTML=d.fn(b)}}),"string"==typeof e?c(h,function(a,c){p(b,c)}):1==e&&p(b),f&&f()}function r(a,b,c){for(var f,d=0,e=c.length;e>d;d++)f=a._.nodes[c[d]],-1==b.indexOf(f)&&b.push(f)}function s(b){b.el.on("keyup change",function(c){var j,e=a(c.target),f=d(e.attr("name")),g=e.val();if(""!=f&&!(c.ctrlKey||c.altKey||c.shiftKey||a.inArray(c.keyCode,[16,17,18])>-1)&&(!e.is("[type=radio]")||e.is(":checked"))){if(e.is("[type=checkbox]")){var g=[];b.el.find("[name="+f+"][type=checkbox]:checked").each(function(b,c){g.push(a(c).val())})}j=new Function("scope","val","scope."+f+"=val;"),j(b,g),b.render(f)}})}function t(a,b){e=[];var f,h="var __=[];with(scope){__.push('",j=b.replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(i,function(a,b){var d=x(b).match(g);return c(d,function(a,b){e.push(b)}),"');__.push("+w(b)+");__.push('"}),k="');} return __.join('')";return""==d(j)?null:f=new Function("scope",h+j+k)}function u(a,b){var d,f;return e=[],d=new Function("scope","with(scope){return "+b+";}"),f=x(b).match(g),c(f,function(a,b){e.push(b)}),d}function v(a,b,c){var e,f="var __=[];with(scope){_7("+c+",function($index,$value){__.push('",g=b.replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(i,function(a,b){return"');__.push("+w(b)+");__.push('"}),h="');})} return __.join('')";return""==d(g)?null:e=new Function("scope",f+g+h)}function w(a){return a.split("\\'").join("'").split("&quot;").join('"')}function x(a,b){return b=b||"",null==a?b:a}function y(b){b.el.find("[name]").each(function(){for(var h,c=a(this),d=c.attr("name").split("."),e=d.length,f=b,g=0;e>g;g++){if(h=d[g],g==e-1){h in f||(f[h]="");break}h in f||(f[h]={},f=f[h])}})}function z(b){var d,c=a(this);if(0!=c.size())return c.hide(),d=k(c),y(d),b&&b(d),m(d),d.render(!0,function(){c.show()}),s(d),c}var e,b=a.extend,c=a.each,d=a.trim,g=/[a-zA-Z$_][a-zA-Z0-9$_\.]*/g,h=/y-on[a-zA-Z0-9]+/,i=/\{\{([^\}]*)\}\}/g,j=/\{\{([^\}]*)\}\}/;return b(k.prototype,{render:function(a,b){var c=this;return l(c,a,b),c},extend:function(a){var c=this;return b(c,a),c},watch:function(a,b){if("object"==typeof a)for(key in a)this.watch(key,a[key]);var c=this._.watchMap;return a in c?c[a].push(b):c[a]=[b],this},_7:c}),a.fn.extend({pingy:z}),a});