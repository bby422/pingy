/*! pingy 2015-02-22 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b.call(a,c)}):b.call(a,$)}(this,function(a){function b(a){var c=this;return c instanceof b?void c.extend({_:{nodes:[],varNodeMap:{},watchMap:{}},el:a}):new b(a)}function c(a){s(a.childNodes,function(a,b){switch(b.nodeType){case 1:d(b);break;case 3:e(b)}})}function d(b){var d=!0;s(b.attributes,function(c,e){var f,g=e.name,h=t(n(e.value)),i=1;if("y-each"==g)i=70,d=!1,f=l(b.innerHTML,h),q=[t(h)];else{if(v.test(g))return void a(b).on(g.split("y-on").join(""),p[h]);"value"==g?(i=71,f=j(h)):"y-hide"==g?(i=72,f=k(h)):f=j(h)}f&&(p._.nodes.push({type:i,node:b,fn:f,attr:g}),s(q,function(a,b){null==p._.varNodeMap[b]?p._.varNodeMap[b]=[p._.nodes.length-1]:p._.varNodeMap[b].push(p._.nodes.length-1)}))}),b.childNodes.length&&d&&c(b)}function e(a){var b,c=t(a.textContent);""!=c&&(b=j(n(c))),b&&(p._.nodes.push({type:3,node:a,fn:b}),s(q,function(a,b){null==p._.varNodeMap[b]?p._.varNodeMap[b]=[p._.nodes.length-1]:p._.varNodeMap[b].push(p._.nodes.length-1)}))}function f(a){for(var b in p._.watchMap)null==a?p._.watchMap[b]():a==b?p._.watchMap[b]():0==a.indexOf(b+".")&&p._.watchMap[b]()}function g(b){var c=p._.nodes;b?(c=[],s(b.split(","),function(a,b){f(b);for(var d in p._.varNodeMap){var e=t(b),g=t(d);e==g?h(c,p._.varNodeMap[d]):0==g.indexOf(e+".")&&h(c,p._.varNodeMap[d])}})):f(),s(c,function(b,c){switch(c.type){case 1:c.node.setAttribute(c.attr,c.fn(p));break;case 3:c.node.textContent=c.fn(p);break;case 70:c.node.innerHTML=c.fn(p);break;case 71:a(c.node).val(c.fn(p));break;case 72:c.fn(p)?a(c.node).hide():a(c.node).show()}})}function h(a,b){for(var c,d=0,e=b.length;e>d;d++)c=p._.nodes[b[d]],-1==a.indexOf(c)&&a.push(c)}function i(){var b=p;b.el.on("keyup change",function(c){var d,e=a(c.target),f=t(e.attr("name")),g=e.val();if(""!=f&&(!e.is("[type=radio]")||e.is(":checked"))){if(e.is("[type=checkbox]")){var g=[];b.el.find("[name="+f+"][type=checkbox]:checked").each(function(b,c){g.push(a(c).val())})}d=new Function("scope","val","scope."+f+"=val;"),d(b,g),b.render(f)}})}function j(a){q=[];var b,c="var __=[];with(scope){__.push('",d=a.replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(w,function(a,b){var c=n(b).match(u);return s(c,function(a,b){q.push(b)}),"');__.push("+m(b)+");__.push('"}),e="');} return __.join('')";return""==t(d)?null:b=new Function("scope",c+d+e)}function k(a){var b,c;return q=[],b=new Function("scope","with(scope){return "+a+";}"),c=n(a).match(u),s(c,function(a,b){q.push(b)}),b}function l(a,b){var c,d="var __=[];with(scope){_7("+b+",function($index,$value){__.push('",e=a.replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(w,function(a,b){return"');__.push("+m(b)+");__.push('"}),f="');})} return __.join('')";return""==t(e)?null:c=new Function("scope",d+e+f)}function m(a){return a.split("\\'").join("'").split("&quot;").join('"')}function n(a,b){return b=b||"",null==a?b:a}function o(d){var e=a(this);return p=b(e),d&&d(p),c(p.el.get(0)),p.render(),i(),e}var p,q,r=a.extend,s=a.each,t=a.trim,u=/[a-zA-Z$_][a-zA-Z0-9$_\.]*/g,v=/y-on[a-zA-Z0-9]+/,w=/\{\{([^\}]*)\}\}/g;return r(b.prototype,{render:function(a){var b=this;return p=b,g(a),b},extend:function(a){var b=this;return r(b,a),b},watch:function(a,b){this._.watchMap[a]=b},_7:s}),a.fn.extend({pingy:o}),a});